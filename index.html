<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>Chess with video</title>
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css"
          integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/grids-responsive-min.css"/>
</head>
<style type="text/css">
    .l-box {
        padding: 1em;
    }
</style>
<body>
<div id="mainDiv" class="l-box">
    <h3>Welcome in chess with video application!</h3>
    <form class="pure-form">
        <fieldset>
            <legend>Enter channel name (for uniqueness use minimum 12 characters):</legend>
            <input id="channelNameInput" type="text" placeholder="Channel name" required=""/>
            <button id="submitButton" type="submit" class="pure-button pure-button-primary" onclick="createChannel()"
                    disabled="">
                Create
            </button>
        </fieldset>
    </form>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" crossorigin="anonymous"></script>
<script>
    let $channelNameInput = $('#channelNameInput');
    let $submitButton = $('#submitButton');

    const inputHandler = function () {
        if ($channelNameInput.val().length >= 12)
            $submitButton.prop('disabled', false);
        else
            $submitButton.prop('disabled', true);
    }

    $channelNameInput.on('input', inputHandler);

    function createChannel() {
        const roomPath = "/room/" + $channelNameInput.val();
        $.post(roomPath, function () {
            window.location.replace(roomPath);
        });
    }
</script>
</body>
</html>

